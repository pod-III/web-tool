<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic List Converter - English 1 Batam</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'e1-pink': '#FF6B95',
                        'e1-orange': '#FF8C42',
                        'e1-green': '#00E676',
                        'e1-blue': '#2979FF',
                        'e1-dark': '#1e293b',
                        'e1-chalk': '#f8fafc',
                    },
                    fontFamily: {
                        headings: ['Fredoka', 'sans-serif'],
                        body: ['Nunito', 'sans-serif'],
                    },
                    boxShadow: {
                        'neo': '4px 4px 0px 0px rgba(30, 41, 59, 1)',
                        'neo-lg': '8px 8px 0px 0px rgba(30, 41, 59, 1)',
                        'neo-sm': '2px 2px 0px 0px rgba(30, 41, 59, 1)',
                    },
                    borderWidth: { '3': '3px', '4': '4px' }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f8fafc;
            background-image: 
                linear-gradient(rgba(30, 41, 59, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(30, 41, 59, 0.05) 1px, transparent 1px);
            background-size: 25px 25px;
        }
        .dark body {
            background-color: #0f172a;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
        }

        /* Neo-Brutalist Form Elements */
        .select-neo {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%231e293b' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
        }

        .btn-action {
            transition: all 0.1s ease;
        }
        .btn-action:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px 0px rgba(30, 41, 59, 1);
        }
        .btn-action:active {
            transform: translate(2px, 2px);
            box-shadow: 0px 0px 0px 0px rgba(30, 41, 59, 1);
        }
    </style>
</head>

<body class="font-body text-e1-dark min-h-screen flex flex-col p-6 max-w-7xl mx-auto w-full">

    <nav class="w-full bg-white border-4 border-e1-dark p-4 rounded-2xl shadow-neo mb-8 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <a href="../index.html" class="bg-e1-dark text-white p-2 rounded-xl hover:bg-slate-700 transition">
                <i data-lucide="arrow-left" class="w-6 h-6"></i>
            </a>
            <h1 class="font-headings text-2xl font-bold">Magic List <span class="text-e1-pink underline decoration-4 underline-offset-4">Converter</span></h1>
        </div>
        <div class="hidden md:flex gap-2">
            <span class="bg-e1-blue/10 text-e1-blue px-3 py-1 rounded-lg font-bold text-sm border-2 border-e1-blue">Text Tool</span>
            <span class="bg-e1-orange/10 text-e1-orange px-3 py-1 rounded-lg font-bold text-sm border-2 border-e1-orange">Utility</span>
        </div>
    </nav>

    <main class="grid grid-cols-1 lg:grid-cols-2 gap-8 flex-grow">
        
        <div class="flex flex-col gap-4">
            <div class="flex justify-between items-end">
                <label class="font-headings font-bold text-xl flex items-center gap-2">
                    <i data-lucide="file-input" class="text-e1-blue"></i>
                    Input Data
                </label>
                <button onclick="clearInput()" class="text-sm font-bold text-slate-400 hover:text-red-500 transition">Clear</button>
            </div>
            
            <textarea id="inputText" 
                class="w-full h-64 lg:h-full bg-white border-4 border-e1-dark rounded-2xl p-6 font-mono text-sm shadow-neo focus:ring-4 focus:ring-e1-blue/20 outline-none resize-none"
                placeholder="Paste your list here...&#10;1. Apple&#10;2. Banana&#10;3. Cherry&#10;&#10;OR&#10;&#10;Red, Green, Blue"></textarea>
            
            <div class="flex gap-4 text-xs font-bold text-slate-500 px-2">
                <span id="charCount">0 chars</span>
                <span id="lineCount">0 lines</span>
            </div>
        </div>

        <div class="flex flex-col gap-6">
            
            <div class="bg-white border-4 border-e1-dark rounded-2xl p-6 shadow-neo">
                
                <div class="mb-6 pb-6 border-b-2 border-dashed border-slate-200">
                    <h3 class="font-headings font-bold text-sm uppercase text-slate-400 mb-3 tracking-wider">Modifiers</h3>
                    
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <div class="flex flex-col gap-1">
                            <label class="text-xs font-bold text-e1-orange">Sorting</label>
                            <select id="sortOpt" class="select-neo w-full bg-white border-3 border-e1-orange rounded-xl px-3 py-2 font-bold text-sm shadow-neo-sm focus:outline-none cursor-pointer">
                                <option value="none">Original</option>
                                <option value="az">A-Z</option>
                                <option value="za">Z-A</option>
                                <option value="reverse">Reverse</option>
                                <option value="random">Shuffle ðŸŽ²</option>
                            </select>
                        </div>

                        <div class="flex flex-col gap-1">
                            <label class="text-xs font-bold text-e1-pink">Case</label>
                            <select id="caseOpt" class="select-neo w-full bg-white border-3 border-e1-pink rounded-xl px-3 py-2 font-bold text-sm shadow-neo-sm focus:outline-none cursor-pointer">
                                <option value="none">No Change</option>
                                <option value="title">Title Case</option>
                                <option value="upper">UPPERCASE</option>
                                <option value="lower">lowercase</option>
                            </select>
                        </div>

                         <div class="flex flex-col gap-1">
                            <label class="text-xs font-bold text-e1-green">Num Style</label>
                            <select id="numOpt" class="select-neo w-full bg-white border-3 border-e1-green rounded-xl px-3 py-2 font-bold text-sm shadow-neo-sm focus:outline-none cursor-pointer">
                                <option value="dot">1.</option>
                                <option value="paren">1)</option>
                                <option value="alpha">a.</option>
                                <option value="roman">I.</option>
                            </select>
                        </div>
                    </div>

                    <div class="mt-3 flex items-center gap-2">
                        <input type="checkbox" id="dedupOpt" class="w-5 h-5 border-3 border-e1-dark rounded text-e1-blue focus:ring-0 cursor-pointer">
                        <label for="dedupOpt" class="text-sm font-bold text-slate-600 cursor-pointer select-none">Remove Duplicates</label>
                    </div>
                </div>

                <h3 class="font-headings font-bold text-sm uppercase text-slate-400 mb-3 tracking-wider">Actions</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    
                    <button onclick="convert('listToComma')" class="btn-action bg-e1-chalk border-3 border-e1-dark rounded-xl p-3 font-bold text-left flex items-center gap-3 hover:bg-e1-blue hover:text-white group">
                        <i data-lucide="list-ordered" class="w-5 h-5 text-e1-blue group-hover:text-white"></i>
                        <span>List â†’ Comma</span>
                    </button>

                    <button onclick="convert('linesToComma')" class="btn-action bg-e1-chalk border-3 border-e1-dark rounded-xl p-3 font-bold text-left flex items-center gap-3 hover:bg-e1-orange hover:text-white group">
                        <i data-lucide="text-cursor-input" class="w-5 h-5 text-e1-orange group-hover:text-white"></i>
                        <span>Lines â†’ Comma</span>
                    </button>

                    <button onclick="convert('commaToOrdered')" class="btn-action bg-e1-chalk border-3 border-e1-dark rounded-xl p-3 font-bold text-left flex items-center gap-3 hover:bg-e1-green hover:text-white group">
                        <i data-lucide="list-ordered" class="w-5 h-5 text-e1-green group-hover:text-white"></i>
                        <span>Comma â†’ List</span>
                    </button>

                    <button onclick="convert('commaToList')" class="btn-action bg-e1-chalk border-3 border-e1-dark rounded-xl p-3 font-bold text-left flex items-center gap-3 hover:bg-e1-pink hover:text-white group">
                        <i data-lucide="list" class="w-5 h-5 text-e1-pink group-hover:text-white"></i>
                        <span>Comma â†’ Bullets</span>
                    </button>

                </div>
            </div>

            <div class="flex flex-col gap-2 flex-grow">
                <label class="font-headings font-bold text-xl flex items-center gap-2">
                    <i data-lucide="file-output" class="text-e1-green"></i>
                    Result
                </label>
                <div class="relative flex-grow">
                    <textarea id="outputText" readonly
                        class="w-full h-full min-h-[150px] bg-slate-50 border-4 border-e1-dark rounded-2xl p-6 font-mono text-sm shadow-neo outline-none resize-none text-slate-600"></textarea>
                    
                    <button onclick="copyToClipboard()" class="absolute top-4 right-4 bg-e1-dark text-white p-2 rounded-xl border-2 border-white shadow-lg hover:bg-e1-blue transition-colors group">
                        <i data-lucide="copy" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        lucide.createIcons();

        // ---- ELEMENTS ----
        const inputEl = document.getElementById('inputText');
        const outputEl = document.getElementById('outputText');
        const charCountEl = document.getElementById('charCount');
        const lineCountEl = document.getElementById('lineCount');
        
        // Settings Elements
        const sortOpt = document.getElementById('sortOpt');
        const caseOpt = document.getElementById('caseOpt');
        const numOpt = document.getElementById('numOpt');
        const dedupOpt = document.getElementById('dedupOpt');

        // ---- STATS UPDATE ----
        inputEl.addEventListener('input', () => {
            const text = inputEl.value;
            charCountEl.innerText = `${text.length} chars`;
            lineCountEl.innerText = `${text.split(/\r\n|\r|\n/).length} lines`;
        });

        function clearInput() {
            inputEl.value = '';
            outputEl.value = '';
            inputEl.focus();
        }

        function copyToClipboard() {
            outputEl.select();
            document.execCommand('copy');
            
            // Visual feedback
            const btn = document.querySelector('button[onclick="copyToClipboard()"]');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = `<i data-lucide="check" class="w-5 h-5 text-e1-green"></i>`;
            lucide.createIcons();
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                lucide.createIcons();
            }, 1500);
        }

        // ---- MAIN LOGIC ----
        function convert(action) {
            let raw = inputEl.value;
            let items = [];

            // 1. PRE-PROCESS: Standardize to Array
            if (action.includes('listTo') || action.includes('linesTo')) {
                // Split by newline
                items = raw.split(/\r\n|\r|\n/);
                // Clean existing bullets/numbers if it's a list
                if (action === 'listToComma') {
                    items = items.map(line => line.replace(/^[\d]+\.|^[\d]+\)|^\-|^\*|^\â€¢/g, '').trim());
                }
            } else {
                // Split by comma or newline (smart split)
                items = raw.split(/,|\n/);
            }

            // Trim whitespace
            items = items.map(i => i.trim()).filter(i => i);

            // 2. APPLY MODIFIERS

            // A. Dedup
            if (dedupOpt.checked) {
                items = [...new Set(items)];
            }

            // B. Case Transformation
            const caseMode = caseOpt.value;
            if (caseMode !== 'none') {
                items = items.map(str => {
                    if (caseMode === 'upper') return str.toUpperCase();
                    if (caseMode === 'lower') return str.toLowerCase();
                    if (caseMode === 'title') {
                        return str.replace(/\w\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());
                    }
                    return str;
                });
            }

            // C. Sorting
            const sortMode = sortOpt.value;
            if (sortMode === 'az') items.sort((a, b) => a.localeCompare(b));
            if (sortMode === 'za') items.sort((a, b) => b.localeCompare(a));
            if (sortMode === 'reverse') items.reverse();
            if (sortMode === 'random') items.sort(() => Math.random() - 0.5);


            // 3. FINAL FORMATTING (Output Generation)
            let result = '';

            if (action.includes('ToComma')) {
                // Join with comma + space
                result = items.join(', ');
            } 
            else if (action === 'commaToList') {
                // Bullet List
                result = items.map(i => `â€¢ ${i}`).join('\n');
            } 
            else if (action === 'commaToOrdered') {
                // Ordered List with Styles
                const style = numOpt.value;
                result = items.map((item, index) => {
                    let marker = '';
                    let n = index + 1;
                    
                    if (style === 'dot') marker = `${n}.`;
                    if (style === 'paren') marker = `${n})`;
                    if (style === 'alpha') marker = `${String.fromCharCode(96 + n)}.`; // a. b. c.
                    if (style === 'roman') marker = `${toRoman(n)}.`; // I. II.
                    
                    return `${marker} ${item}`;
                }).join('\n');
            }

            outputEl.value = result;
        }

        // Helper for Roman Numerals
        function toRoman(num) {
            const lookup = {M:1000,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};
            let roman = '';
            for (let i in lookup ) {
                while ( num >= lookup[i] ) {
                    roman += i;
                    num -= lookup[i];
                }
            }
            return roman;
        }
    </script>
</body>
</html>